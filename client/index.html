<!DOCTYPE html>
<html>
    <head>
    	<script type="text/javascript" src="js/es6-shim.min.js"></script>
        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript" src="js/createjs-2015.11.26.min.js"></script>
        <script type="text/javascript" src="/socket.io/socket.io.js"></script>
        <script type="text/javascript" src="js/ghostnight-client.js"></script>
        <style>
            canvas{
                left: 50%;
                top: 50%;
                margin: -360px 0 0 -640px;
                position: absolute;
            }
        </style>
        <title>Ghost Night</title>
    </head>
    <body style="background-color: #2D2D2D" onload="init()">
        <canvas id="canvas" name="canvas" width="1280" height="720" style="background-color: #202020">Your browser doesn't support canvas.</canvas>
        <a href="http://goo.gl/forms/PQLmp2gjVN" style="font-size: 48px;color:#DDDDDD">Please fill this survey</a>
        <!--<canvas id="gamecanvas" name="gamecanvas" width="1280" height="720" style="background-color: #202020">Your browser doesn't support canvas.</canvas>-->
        <script>
            /*global createjs, GN, socket, io*/ 
            var canvas, stage;
            var socket;
            
            function init() {
            	
            	canvas = document.getElementById("canvas");
                // gamecanvas = document.getElementById("gamecanvas");
                stage = new createjs.Stage(canvas);
            	
            	stage.autoClear = true;
            	stage.enableDOMEvents(true);
            	// stage.enableMouseOver(10);
            	
            	createjs.Touch.enable(stage);
            	createjs.Ticker.setFPS(60);
                createjs.Ticker.addEventListener("tick", stage);
                
                socket = io.connect();
                
                stage.on('stagemousedown', function(evt, data){
                    socket.emit('click', {x: evt.stageX, y: evt.stageY, button: evt.nativeEvent.button});
                })
            	
            	var compatibility = new createjs.Text("Your browser do not support ES6,\nPlease use the lastest version of Chrome.", "24px Arial", "#666666");
            	compatibility.x = canvas.width / 2;
            	compatibility.y = canvas.height / 2;
            	compatibility.textAlign = 'center';
            	stage.addChild(compatibility);
            	stage.update();
            	
            	initGame(socket);
            }
        </script>
    </body>
</html>